<table class="table">
  <thead class="title">
    <th>Time</th>
    <th>Station</th>
    <th>Stop</th>
  </thead>
  <tbody>
    @for (el of route()?.path; let i = $index; track i) {
      @if (stationsService.getStationById(el) | async; as station) {
        <tr
          [ngClass]="{
            highlightedRow: isHighlighted(i),
          }">
          <td class="col1">
            @if (i === stepsAmount()) {
              <span>
                {{ route()?.schedule?.segments?.[i - 1]?.time?.[1] | date: 'shortTime' }}
              </span>
            }
            <span>
              {{ route()?.schedule?.segments?.[i]?.time?.[0] | date: 'shortTime' }}
            </span>
            <span>
              {{ route()?.schedule?.segments?.[i]?.time?.[1] | date: 'shortTime' }}
            </span>
          </td>
          <td class="col2">{{ station.city }}</td>
          <td class="col3">
            @if (i === 0) {
              First station
            } @else if (i === stepsAmount()) {
              Last station
            }
            {{
              route()?.schedule?.segments?.[i - 1]?.time?.[1] | dateDiff: route()?.schedule?.segments?.[i]?.time?.[0]
            }}
          </td>
        </tr>
      }
    }
  </tbody>
</table>
