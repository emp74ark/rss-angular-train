import{a as h}from"./chunk-7KWFZQOJ.js";import{a as g,c as k,d as w,e as F,g as j}from"./chunk-3WAN5EPO.js";import{aa as I}from"./chunk-TBGXLZM5.js";import"./chunk-RM2JN6MJ.js";import{$a as a,Ea as x,Fa as P,Fb as E,Gb as R,Hb as i,Ib as o,Kb as T,Nb as f,Pb as A,W as c,_b as l,ac as _,ea as s,ia as p,ic as C,sa as D,ta as b,wb as u,za as m}from"./chunk-VN6HQHAM.js";import"./chunk-A43TDCY5.js";var L=(()=>{let e=class e{constructor(){this.order=P(),this.orderService=s(h),this.destroyRef=s(m),this.orderCancelled=x()}onCancel(){let n=this.order()?.id;n&&this.orderService.cancelOrder(n).pipe(c(t=>{console.log("ORDER CANCELATION",t),this.orderCancelled.emit(!0)}),g(this.destroyRef)).subscribe()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-order-details"]],inputs:{order:[1,"order"]},outputs:{orderCancelled:"orderCancelled"},standalone:!0,features:[C],decls:11,vars:4,consts:[[1,"order-card"],[1,"order-card__title"],[1,"order-card__content"],["mat-button","",3,"click","disabled"]],template:function(t,d){if(t&1&&(i(0,"mat-card",0)(1,"mat-card-title",1)(2,"span"),l(3),o(),i(4,"span"),l(5),o()(),i(6,"mat-card-content",2),l(7),o(),i(8,"mat-card-actions")(9,"button",3),f("click",function(){return d.onCancel()}),l(10,"Cancel order"),o()()()),t&2){let y,v,S,M;a(3),_(" Order ID: ",(y=d.order())==null?null:y.id," "),a(2),_(" Status: ",(v=d.order())==null?null:v.status," "),a(2),_(" Seat number: ",(S=d.order())==null?null:S.userId," "),a(2),u("disabled",((M=d.order())==null?null:M.status)==="canceled")}},dependencies:[k,w,F,j,I],styles:[".order-card[_ngcontent-%COMP%]{padding:1rem 2rem}.order-card__title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between}.order-card__title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{font-size:x-small}.order-card__content[_ngcontent-%COMP%]{padding:1rem 0}"]});let r=e;return r})();var N=(r,e)=>e.id;function U(r,e){if(r&1){let O=T();i(0,"app-order-details",2),f("orderCancelled",function(){D(O);let t=A();return b(t.onOrderListChanged())}),o()}if(r&2){let O=e.$implicit;u("order",O)}}var te=(()=>{let e=class e{constructor(){this.orderService=s(h),this.destroyRef=s(m),this.orders=[]}getAllOrders(){this.orderService.getOrders(!0).pipe(c(n=>{n&&(this.orders=n)}),g(this.destroyRef)).subscribe()}ngOnInit(){this.getAllOrders()}onOrderListChanged(){this.getAllOrders()}};e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=p({type:e,selectors:[["app-order-page"]],standalone:!0,features:[C],decls:3,vars:0,consts:[[1,"order-page"],[3,"order"],[3,"orderCancelled","order"]],template:function(t,d){t&1&&(i(0,"div",0),E(1,U,1,1,"app-order-details",1,N),o()),t&2&&(a(),R(d.orders))},dependencies:[L],styles:[".order-page[_ngcontent-%COMP%]{padding:2rem}"]});let r=e;return r})();export{te as OrderPageComponent};
