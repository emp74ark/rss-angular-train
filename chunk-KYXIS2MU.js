import{a as te}from"./chunk-AMKR4GSQ.js";import{a as K,d as y}from"./chunk-DA3KNJXH.js";import"./chunk-U4EE5O5S.js";import{a as k,c as V}from"./chunk-MHANH5UQ.js";import{a as ie,c as oe,d as re,e as ne,f as ae,g as le,h as G}from"./chunk-6FOTKAWA.js";import{b as Q,c as D,d as R,e as X,h as U,j as I}from"./chunk-4IORBILI.js";import{d as Y,w as Z,x as $,y as ee}from"./chunk-3UPHS55R.js";import"./chunk-RGNDWIHZ.js";import{A as P,C as N,c as H,h,i as _,k as M,l as b,q as J,s as w,u as F}from"./chunk-BGIOPOK4.js";import{ha as T,la as W}from"./chunk-LZO44IQN.js";import{$a as m,$b as A,Cb as j,Hb as e,Ib as t,Jb as f,Kb as v,Nb as c,Pb as d,_b as o,ac as L,ea as p,ia as E,ic as x,jc as S,kc as z,sa as g,sb as B,ta as C,wb as u,zb as q}from"./chunk-4LMCG722.js";import"./chunk-A43TDCY5.js";var pe=()=>({padding:"10px"}),me=(()=>{let n=class n{constructor(){this.fb=p(P),this.dialogRef=p(ie),this.passwordForm=this.fb.group({password:["",[_.required,K()]]})}savePassword(){this.passwordForm.valid&&this.dialogRef.close(this.passwordForm.value)}closeModal(){this.dialogRef.close()}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=E({type:n,selectors:[["app-password-modal"]],standalone:!0,features:[x([{provide:k,useValue:y}]),S],decls:15,vars:4,consts:[["mat-dialog-title",""],[3,"formGroup"],["appearance","outline"],["matInput","","type","password","formControlName","password"],["formControlName","password"],["mat-button","","mat-dialog-close","",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(i,s){i&1&&(e(0,"h2",0),o(1,"Change Password"),t(),e(2,"mat-dialog-content")(3,"form",1)(4,"mat-form-field",2)(5,"mat-label"),o(6,"New Password"),t(),f(7,"input",3),e(8,"mat-error"),f(9,"app-form-error-message",4),t()()()(),e(10,"mat-dialog-actions")(11,"button",5),c("click",function(){return s.closeModal()}),o(12,"Cancel"),t(),e(13,"button",6),c("click",function(){return s.savePassword()}),o(14,"Save"),t()()),i&2&&(m(3),u("formGroup",s.passwordForm),m(),q(z(3,pe)))},dependencies:[G,re,ne,le,ae,U,D,T,I,R,N,J,h,M,b,w,F,V]});let r=n;return r})();function de(r,n){if(r&1){let a=v();e(0,"mat-form-field",6)(1,"mat-label"),o(2,"Edit Name"),t(),f(3,"input",7),e(4,"mat-error"),f(5,"app-form-error-message",8),t()(),e(6,"button",9),c("click",function(){g(a);let i=d();return C(i.saveProfile())}),e(7,"mat-icon"),o(8,"save"),t()()}if(r&2){let a=d();m(3),u("value",a.profileForm.value.name)}}function fe(r,n){if(r&1){let a=v();e(0,"div",6)(1,"mat-label"),o(2,"Name"),t(),e(3,"p"),o(4),t()(),e(5,"button",10),c("click",function(){g(a);let i=d();return C(i.toggleEditName())}),e(6,"mat-icon"),o(7,"edit"),t()()}if(r&2){let a=d();m(4),A(a.profileForm.value.name)}}function ue(r,n){if(r&1){let a=v();e(0,"mat-form-field",6)(1,"mat-label"),o(2,"Edit Email"),t(),f(3,"input",11),e(4,"mat-error"),f(5,"app-form-error-message",12),t()(),e(6,"button",9),c("click",function(){g(a);let i=d();return C(i.saveProfile())}),e(7,"mat-icon"),o(8,"save"),t()()}if(r&2){let a=d();m(3),u("value",a.profileForm.value.email)}}function _e(r,n){if(r&1){let a=v();e(0,"div",6)(1,"mat-label"),o(2,"Email"),t(),e(3,"p"),o(4),t()(),e(5,"button",10),c("click",function(){g(a);let i=d();return C(i.toggleEditEmail())}),e(6,"mat-icon"),o(7,"edit"),t()()}if(r&2){let a=d();m(4),A(a.profileForm.value.email)}}var He=(()=>{let n=class n{constructor(){this.fb=p(P),this.profileService=p(te),this.authService=p(Q),this.router=p(H),this.dialog=p(oe),this.role="",this.profileForm=this.fb.group({name:["",_.required],email:["",[_.required,_.email]]}),this.isEditName=!1,this.isEditEmail=!1}ngOnInit(){this.profileService.loadProfile().subscribe(l=>{l&&(this.profileForm.patchValue({name:l.name,email:l.email}),this.role=l.role)})}saveProfile(){this.profileForm.valid&&(this.profileService.updateProfile(this.profileForm.value).subscribe(),this.isEditName=!1,this.isEditEmail=!1)}toggleEditName(){this.isEditName=!this.isEditName}toggleEditEmail(){this.isEditEmail=!this.isEditEmail}changePassword(){this.dialog.open(me).afterClosed().subscribe(i=>{i&&this.profileService.updatePassword(i).subscribe()})}logout(){this.authService.logOut(),this.router.navigate(["/"])}};n.\u0275fac=function(i){return new(i||n)},n.\u0275cmp=E({type:n,selectors:[["app-user-profile"]],standalone:!0,features:[x([{provide:k,useValue:y}]),S],decls:18,vars:5,consts:[[1,"profile-card"],[1,"profile-title"],[1,"profile-field",3,"formGroup"],[1,"profile-actions"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","accent",3,"click"],["appearance","outline"],["matInput","","formControlName","name",3,"value"],["formControlName","name"],["mat-icon-button","","matSuffix","","color","primary",3,"click"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","email",3,"value"],["formControlName","email"]],template:function(i,s){i&1&&(e(0,"mat-card",0)(1,"mat-card-content")(2,"mat-card-title",1)(3,"b"),o(4,"User Profile"),t()(),e(5,"p"),o(6),t(),e(7,"div",2),B(8,de,9,1)(9,fe,8,1),t(),e(10,"div",2),B(11,ue,9,1)(12,_e,8,1),t(),e(13,"div",3)(14,"button",4),c("click",function(){return s.logout()}),o(15,"Logout"),t(),e(16,"button",5),c("click",function(){return s.changePassword()}),o(17,"Change Password"),t()()()()),i&2&&(m(6),L("Role: ",s.role,""),m(),u("formGroup",s.profileForm),m(),j(s.isEditName?8:9),m(2),u("formGroup",s.profileForm),m(),j(s.isEditEmail?11:12))},dependencies:[N,h,M,b,w,F,Z,ee,U,I,D,G,Y,T,X,W,$,R,V],styles:[".profile-card[_ngcontent-%COMP%]{max-width:400px;margin:0 auto}.profile-field[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:16px}.profile-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:24px}"]});let r=n;return r})();export{He as UserProfileComponent};
