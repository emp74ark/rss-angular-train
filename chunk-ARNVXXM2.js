import{a as tt,b as et,d as it,e as rt,f as ot,g as nt,h as at}from"./chunk-HIZNMLD4.js";import{a as X}from"./chunk-Y7VY4EK4.js";import{a as Z}from"./chunk-6XRQLHYW.js";import{b as J,d as Q,e as W}from"./chunk-B3XRRNEZ.js";import{a as O,b as k}from"./chunk-VJBOIVAD.js";import{h as q}from"./chunk-7OYOML3X.js";import{a as Y,da as K}from"./chunk-PH5NDWNK.js";import{$a as n,$b as M,C as S,Cb as w,Ec as D,Hb as l,Ib as m,Jb as G,Kb as j,Nb as A,Pb as x,Pc as P,T as _,_ as B,_b as g,ac as V,ea as a,ec as H,fc as F,g as N,gc as E,ia as v,ic as R,jc as d,m as s,mb as z,sa as T,ta as I,ub as $,wb as p,za as b}from"./chunk-VN6HQHAM.js";import{a as C,b as y}from"./chunk-A43TDCY5.js";var L="/api/route",wt=(()=>{let i=class i{constructor(){this.httpClient=a(Y),this.destroyRef=a(b),this.stationsService=a(X),this.carriageService=a(Z),this.$$routes=new N([]),this.$routes=this.$$routes.asObservable(),this.getAllRoutes().pipe(O(this.destroyRef)).subscribe();let r=k(this.$$routes,{initialValue:[]});this.stationsSig=k(this.stationsService.$stations,{initialValue:[]}),this.carriagesSig=k(this.carriageService.$carriages,{initialValue:[]}),this.stationsObjSig=D(()=>this.stationsSig().reduce((t,e)=>y(C({},t),{[e.id]:e}),{})),this.carriagesObjSig=D(()=>this.carriagesSig().reduce((t,e)=>y(C({},t),{[e.code]:e}),{})),this.combinedSignal=D(()=>{let t=r(),e=this.stationsObjSig(),u=this.carriagesObjSig();return t.map(c=>({id:c.id,path:c.path.map(f=>e[f]??{id:0,city:"",latitude:"",longitude:""}),carriages:c.carriages.map(f=>u[f]??{code:f,name:"",rows:1,leftSeats:1,rightSeats:1})}))})}getAllRoutes(){return this.httpClient.get(L).pipe(_(r=>(this.$$routes.next(r),s({status:0,error:null}))),S(({error:r})=>s({status:1,error:r})))}postRoute(r){return this.httpClient.post(L,r).pipe(_(t=>(this.$$routes.next([...this.$$routes.getValue(),y(C({},r),{id:t.id})]),s({status:0,error:null}))),S(({error:t})=>s({status:1,error:t})))}putRoute(r,t){return this.httpClient.put(`${L}/${t}`,r).pipe(_(()=>(this.$$routes.next([...this.$$routes.getValue().map(e=>e.id===t?y(C({},r),{id:t}):e)]),s({status:0,error:null}))),S(({error:e})=>s({status:1,error:e})))}deleteRoute(r){return this.httpClient.delete(`/api/route/${r}`).pipe(_(()=>{let t=this.$$routes.value.filter(e=>e.id!==r);return this.$$routes.next(t),s({status:0,error:null})}),S(({error:t})=>s({status:1,error:t})))}};i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=B({token:i,factory:i.\u0275fac,providedIn:"root"});let o=i;return o})();function mt(o,i){if(o&1&&(l(0,"span"),g(1),m()),o&2){let h=x();n(),M(h.error())}}var jt=(()=>{let i=class i{constructor(){this.control=a(q,{self:!0}),this.errors=a(J),this.destroyRef=a(b),this.error=z(""),this.control.valueAccessor=this}ngOnInit(){this.control.control?.events.pipe(O(this.destroyRef)).subscribe(()=>{if(this.control.name&&this.control.errors){let t=Object.keys(this.control.errors)?.[0],e=this.errors[t]||"Unknown error occurred";this.error.set(e)}else this.error.set("")})}writeValue(){}registerOnChange(){}registerOnTouched(){}setDisabledState(){}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=v({type:i,selectors:[["app-array-control-error-message"]],standalone:!0,features:[R],decls:1,vars:1,template:function(t,e){t&1&&$(0,mt,2,1,"span"),t&2&&w(e.error()?0:-1)}});let o=i;return o})();var dt=()=>({"text-align":"center"}),ft=()=>({display:"flex","justify-content":"center","align-items":"center"}),gt=()=>({"font-size":"70px",height:"70px",width:"70px"}),ht=()=>({display:"flex","justify-content":"center","align-items":"center",gap:"10px","flex-wrap":"nowrap"}),ct=()=>({flex:"1 1 50%"});function Ct(o,i){if(o&1){let h=j();l(0,"button",5),A("click",function(){T(h);let t=x();return I(t.onCancelClick())}),g(1),m()}if(o&2){x();let h=E(1),r=E(2);p("ngStyle",d(3,ct))("color",r),n(),V(" ",h," ")}}var Ht=(()=>{let i=class i{constructor(){this.dialogRef=a(tt),this.data=a(et)}onConfirmClick(){this.dialogRef.close(!0)}onCancelClick(){this.dialogRef.close(!1)}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=v({type:i,selectors:[["app-password-modal"]],standalone:!0,features:[R],decls:15,vars:18,consts:[["mat-dialog-title","",3,"ngStyle"],[3,"ngStyle"],["aria-hidden","false","aria-label","icon",3,"ngStyle","fontIcon","color"],["mat-button","","mat-dialog-close","",3,"ngStyle","color"],["mat-raised-button","",3,"click","ngStyle","color"],["mat-button","","mat-dialog-close","",3,"click","ngStyle","color"]],template:function(t,e){if(t&1){let u=j();H(0)(1)(2)(3)(4)(5)(6),l(7,"h2",0),g(8),m(),l(9,"mat-dialog-content",1),G(10,"mat-icon",2),m(),l(11,"mat-dialog-actions",1),$(12,Ct,2,4,"button",3),l(13,"button",4),A("click",function(){return T(u),I(e.onConfirmClick())}),g(14),m()()}if(t&2){let u,c,f=e.data.title||"Are you sure?";n(),F(e.data.cancelText||"Cancel"),n(),F(e.data.cancelColor||"accent");let lt=e.data.confirmText||"Ok",ut=e.data.confirmColor||"primary",pt=(u=e.data.showCancel)!==null&&u!==void 0?u:"true",U=(c=e.data.showOkIcon)!==null&&c!==void 0?c:!1;n(5),p("ngStyle",d(13,dt)),n(),M(f),n(),p("ngStyle",d(14,ft)),n(),p("ngStyle",d(15,gt))("fontIcon",U?"recommend":"warning_amber")("color",U?"primary":"warn"),n(),p("ngStyle",d(16,ht)),n(),w(pt?12:-1),n(),p("ngStyle",d(17,ct))("color",ut),n(),V(" ",lt," ")}},dependencies:[at,it,rt,nt,ot,W,Q,K,P],changeDetection:0});let o=i;return o})();export{wt as a,jt as b,Ht as c};
